# è¾¾æ¢¦æ•°æ®åº“è¿ç§»æ­¥éª¤

## âœ… å·²å®Œæˆ

1. âœ… Git å¤‡ä»½ MySQL ç‰ˆæœ¬
2. âœ… åˆ›å»ºè¡¨ç»“æ„è½¬æ¢è„šæœ¬
3. âœ… ç”Ÿæˆè¾¾æ¢¦æ•°æ®åº“å»ºè¡¨è„šæœ¬
4. âœ… ç”Ÿæˆå®‰è£…æŒ‡å—æ–‡æ¡£

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### æ­¥éª¤ 1ï¼šå®‰è£…è¾¾æ¢¦æ•°æ®åº“ï¼ˆè¿ç»´ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

1. ä¸‹è½½è¾¾æ¢¦æ•°æ®åº“ DM8
   - å®˜ç½‘ï¼šhttps://www.dameng.com/
   - é€‰æ‹©é€‚åˆæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼ˆWindows/Linuxï¼‰

2. å®‰è£…æ•°æ®åº“
   ```bash
   # Windows: è¿è¡Œå®‰è£…ç¨‹åº
   # Linux: 
   ./DMInstall.bin -i
   ```

3. åˆ›å»ºæ•°æ®åº“å®ä¾‹
   - å®ä¾‹åï¼šPAIZHU
   - ç«¯å£ï¼š5236ï¼ˆé»˜è®¤ï¼‰
   - ç®¡ç†å‘˜ï¼šSYSDBA
   - å¯†ç ï¼šè®¾ç½®å¼ºå¯†ç 

4. åˆ›å»ºåº”ç”¨ç”¨æˆ·
   ```sql
   -- ä½¿ç”¨ DM ç®¡ç†å·¥å…·æˆ– disql è¿æ¥
   CREATE USER paizhu_user IDENTIFIED BY "your_password";
   GRANT DBA TO paizhu_user;
   ```

### æ­¥éª¤ 2ï¼šæ‰§è¡Œå»ºè¡¨è„šæœ¬ï¼ˆå¼€å‘ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

1. è¿æ¥åˆ°è¾¾æ¢¦æ•°æ®åº“
   ```bash
   # ä½¿ç”¨ disql å‘½ä»¤è¡Œå·¥å…·
   disql paizhu_user/your_password@localhost:5236
   ```

2. æ‰§è¡Œå»ºè¡¨è„šæœ¬
   ```sql
   -- åœ¨ disql ä¸­æ‰§è¡Œ
   START backend/paizhu_db_dm8_v2.sql;
   ```

3. éªŒè¯è¡¨ç»“æ„
   ```sql
   -- æŸ¥çœ‹æ‰€æœ‰è¡¨
   SELECT TABLE_NAME FROM USER_TABLES;
   
   -- æŸ¥çœ‹æ‰€æœ‰åºåˆ—
   SELECT SEQUENCE_NAME FROM USER_SEQUENCES;
   
   -- åº”è¯¥æœ‰ 16 ä¸ªè¡¨å’Œ 16 ä¸ªåºåˆ—
   ```

### æ­¥éª¤ 3ï¼šå®‰è£… Node.js é©±åŠ¨ï¼ˆå¼€å‘ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

1. å®‰è£…è¾¾æ¢¦é©±åŠ¨
   ```bash
   cd backend
   npm install dmdb --save
   ```

2. åˆ›å»ºè¾¾æ¢¦æ•°æ®åº“é…ç½®
   ```bash
   # å¤åˆ¶é…ç½®æ–‡ä»¶
   cp .env.dm8.example .env.dm8
   
   # ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å†™å®é™…çš„æ•°æ®åº“ä¿¡æ¯
   ```

3. ä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®
   - æ–‡ä»¶ï¼š`backend/config/database.js`
   - æ·»åŠ è¾¾æ¢¦æ•°æ®åº“æ”¯æŒ

### æ­¥éª¤ 4ï¼šä¿®æ”¹ä»£ç é€‚é…ï¼ˆå¼€å‘ï¼‰

**æ—¶é—´ï¼š1å¤©**

éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š

1. **backend/config/database.js**
   - æ·»åŠ è¾¾æ¢¦æ•°æ®åº“è¿æ¥é…ç½®
   - æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©æ•°æ®åº“ç±»å‹

2. **backend/models/*.js**
   - æ£€æŸ¥ JSON å­—æ®µçš„ getter/setter
   - ç¡®ä¿åºåˆ—åŒ–/ååºåˆ—åŒ–æ­£ç¡®

3. **åŸç”Ÿ SQL æŸ¥è¯¢**
   - æœç´¢é¡¹ç›®ä¸­çš„åŸç”Ÿ SQL
   - è°ƒæ•´ä¸å…¼å®¹çš„è¯­æ³•

### æ­¥éª¤ 5ï¼šæ•°æ®è¿ç§»ï¼ˆå¼€å‘ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

1. ä» MySQL å¯¼å‡ºæ•°æ®
   ```bash
   # åªå¯¼å‡ºæ•°æ®ï¼Œä¸å¯¼å‡ºè¡¨ç»“æ„
   mysqldump -u root -p --no-create-info paizhu_db > mysql_data.sql
   ```

2. è½¬æ¢ INSERT è¯­å¥
   - ç§»é™¤åå¼•å·
   - è°ƒæ•´æ—¥æœŸæ ¼å¼
   - å¤„ç† JSON å­—æ®µ

3. å¯¼å…¥åˆ°è¾¾æ¢¦æ•°æ®åº“
   ```bash
   disql paizhu_user/your_password@localhost:5236 < dm8_data.sql
   ```

### æ­¥éª¤ 6ï¼šæµ‹è¯•éªŒè¯ï¼ˆæµ‹è¯•ï¼‰

**æ—¶é—´ï¼š1å¤©**

æµ‹è¯•æ¸…å•ï¼š

- [ ] ç”¨æˆ·ç™»å½•
- [ ] æ—¥å¿—åˆ›å»º
- [ ] æ—¥å¿—æŸ¥è¯¢
- [ ] é™„ä»¶ä¸Šä¼ 
- [ ] é™„ä»¶ä¸‹è½½
- [ ] å‘¨æ£€å¯Ÿè®°å½•
- [ ] æœˆæ£€å¯Ÿè®°å½•
- [ ] å³æ—¶æ£€å¯Ÿ
- [ ] æŠ¥å‘Šç”Ÿæˆ
- [ ] æ•°æ®ç»Ÿè®¡
- [ ] æœˆåº¦å½’æ¡£
- [ ] æƒé™æ§åˆ¶

### æ­¥éª¤ 7ï¼šæ€§èƒ½æµ‹è¯•ï¼ˆæµ‹è¯•ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

- [ ] æŸ¥è¯¢æ€§èƒ½æµ‹è¯•
- [ ] å¹¶å‘æµ‹è¯•
- [ ] å¤§æ•°æ®é‡æµ‹è¯•
- [ ] ç´¢å¼•ä¼˜åŒ–

### æ­¥éª¤ 8ï¼šç”Ÿäº§éƒ¨ç½²ï¼ˆè¿ç»´ï¼‰

**æ—¶é—´ï¼š0.5å¤©**

1. å¤‡ä»½ MySQL æ•°æ®åº“
2. éƒ¨ç½²è¾¾æ¢¦æ•°æ®åº“
3. åˆ‡æ¢åº”ç”¨é…ç½®
4. éªŒè¯åŠŸèƒ½
5. ç›‘æ§è¿è¡ŒçŠ¶æ€

## ğŸ“Š æ—¶é—´è®¡åˆ’

| é˜¶æ®µ | ä»»åŠ¡ | è´Ÿè´£äºº | æ—¶é—´ | çŠ¶æ€ |
|------|------|--------|------|------|
| å‡†å¤‡ | å®‰è£…è¾¾æ¢¦æ•°æ®åº“ | è¿ç»´ | 0.5å¤© | â³ å¾…å¼€å§‹ |
| å‡†å¤‡ | æ‰§è¡Œå»ºè¡¨è„šæœ¬ | å¼€å‘ | 0.5å¤© | â³ å¾…å¼€å§‹ |
| å‡†å¤‡ | å®‰è£… Node.js é©±åŠ¨ | å¼€å‘ | 0.5å¤© | â³ å¾…å¼€å§‹ |
| å¼€å‘ | ä¿®æ”¹ä»£ç é€‚é… | å¼€å‘ | 1å¤© | â³ å¾…å¼€å§‹ |
| è¿ç§» | æ•°æ®è¿ç§» | å¼€å‘ | 0.5å¤© | â³ å¾…å¼€å§‹ |
| æµ‹è¯• | åŠŸèƒ½æµ‹è¯• | æµ‹è¯• | 1å¤© | â³ å¾…å¼€å§‹ |
| æµ‹è¯• | æ€§èƒ½æµ‹è¯• | æµ‹è¯• | 0.5å¤© | â³ å¾…å¼€å§‹ |
| éƒ¨ç½² | ç”Ÿäº§éƒ¨ç½² | è¿ç»´ | 0.5å¤© | â³ å¾…å¼€å§‹ |
| **æ€»è®¡** | - | - | **5å¤©** | - |

## ğŸ”§ ç”Ÿæˆçš„æ–‡ä»¶

1. **backend/paizhu_db_dm8_v2.sql** - è¾¾æ¢¦æ•°æ®åº“å»ºè¡¨è„šæœ¬
2. **backend/paizhu_db_dm8_v2_install_guide.md** - å®‰è£…æŒ‡å—
3. **backend/.env.dm8.example** - è¾¾æ¢¦æ•°æ®åº“é…ç½®ç¤ºä¾‹
4. **backend/scripts/convert_mysql_to_dm8_v2.js** - è½¬æ¢å·¥å…·

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **JSON å­—æ®µ**
   - è¾¾æ¢¦ä¸æ”¯æŒ JSON ç±»å‹ï¼Œå·²è½¬æ¢ä¸º TEXT
   - éœ€è¦åœ¨åº”ç”¨å±‚å¤„ç†åºåˆ—åŒ–/ååºåˆ—åŒ–
   - Sequelize æ¨¡å‹éœ€è¦æ·»åŠ  getter/setter

2. **ENUM å­—æ®µ**
   - å·²è½¬æ¢ä¸º VARCHAR + CHECK çº¦æŸ
   - æ’å…¥æ•°æ®æ—¶ä¼šè‡ªåŠ¨éªŒè¯

3. **AUTO_INCREMENT**
   - å·²è½¬æ¢ä¸ºåºåˆ—ï¼ˆSEQUENCEï¼‰
   - ä½¿ç”¨ `SEQUENCE_NAME.NEXTVAL` è·å–ä¸‹ä¸€ä¸ªå€¼
   - Sequelize ä¼šè‡ªåŠ¨å¤„ç†

4. **å¤–é”®çº¦æŸ**
   - è¾¾æ¢¦æ”¯æŒå¤–é”®ï¼Œè¯­æ³•ç›¸åŒ
   - æ³¨æ„åˆ é™¤é¡ºåºï¼ˆå…ˆåˆ é™¤å­è¡¨æ•°æ®ï¼‰

5. **å­—ç¬¦é›†**
   - è¾¾æ¢¦é»˜è®¤ä½¿ç”¨ UTF-8
   - ä¸­æ–‡æ”¯æŒè‰¯å¥½

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœè¿ç§»å¤±è´¥ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šï¼š

```bash
# 1. åœæ­¢æœåŠ¡
npm run stop

# 2. åˆ‡æ¢å› MySQL é…ç½®
cp .env.mysql .env

# 3. é‡å¯æœåŠ¡
npm run start

# 4. éªŒè¯åŠŸèƒ½
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- è¾¾æ¢¦å®˜ç½‘ï¼šhttps://www.dameng.com/
- æŠ€æœ¯æ–‡æ¡£ï¼šhttps://eco.dameng.com/document/
- ç¤¾åŒºè®ºå›ï¼šhttps://eco.dameng.com/community/

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] æ‰€æœ‰è¡¨åˆ›å»ºæˆåŠŸ
- [ ] æ‰€æœ‰åºåˆ—åˆ›å»ºæˆåŠŸ
- [ ] æ•°æ®è¿ç§»å®Œæ•´
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] æ€§èƒ½æ»¡è¶³è¦æ±‚
- [ ] æ— æ•°æ®ä¸¢å¤±
- [ ] æ— åŠŸèƒ½å¼‚å¸¸

---

**å½“å‰çŠ¶æ€**ï¼šå·²å®Œæˆå‡†å¤‡å·¥ä½œï¼Œç­‰å¾…å®‰è£…è¾¾æ¢¦æ•°æ®åº“
